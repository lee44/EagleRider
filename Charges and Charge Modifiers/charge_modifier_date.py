import sys
from os.path import abspath, dirname

from playwright.sync_api import sync_playwright

d = dirname(dirname(abspath(__file__)))
sys.path.append(d)
from Utilities.util import Util

util = Util()

charge_modifier_id = [
    59198, 59204, 59215, 59216, 60948, 60949, 60950, 60951, 60952, 59199, 59205, 59214, 59217, 59200, 59206, 59213, 59218, 59201, 59207, 59212, 59219, 59202, 59208, 59211, 59220, 59203, 59209, 59210,
    59221, 59222, 59233, 59234, 59245, 59223, 59232, 59235, 59244, 59224, 59231, 59236, 59243, 59225, 59230, 59237, 59242, 59226, 59229, 59238, 59240, 59227, 59228, 59239, 59241, 59246, 59255, 59256,
    59360, 59247, 59254, 59257, 59264, 59248, 59253, 59258, 59263, 59249, 59252, 59259, 59262, 59250, 59251, 59260, 59261, 59265, 59276, 59277, 59288, 59266, 59275, 59278, 59287, 59267, 59274, 59279,
    59286, 59268, 59273, 59280, 59285, 59269, 59272, 59281, 59284, 59270, 59271, 59282, 59283, 59289, 59300, 59301, 59312, 59290, 59299, 59302, 59311, 59291, 59298, 59303, 59310, 59292, 59297, 59304,
    59309, 59293, 59296, 59305, 59308, 59314, 59323, 59326, 59335, 59315, 59322, 59327, 59334, 59316, 59321, 59328, 59333, 59318, 59319, 59330, 59331, 59337, 59347, 59348, 59359, 59339, 59346, 59350,
    59357, 59340, 59345, 59351, 59356, 59341, 59344, 59352, 59355, 59362, 59371, 59374, 59383, 59363, 59370, 59375, 59382, 59364, 59369, 59376, 59381, 59366, 59367, 59378, 59379, 59385, 59396, 59397,
    59408, 59386, 59395, 59398, 59407, 59387, 59394, 59399, 59406, 59388, 59393, 59400, 59405, 59389, 59392, 59401, 59404, 59390, 59391, 59402, 59403, 59429, 59432, 59440, 59443, 60963, 59430, 59433,
    59441, 59444, 60964, 59431, 59438, 59442, 59445, 60965, 60674, 60675, 60676, 60677, 59446, 59447, 59448, 59449, 59788, 59789, 59790, 59791, 59792, 59793, 59794, 59795, 59796, 59797, 59798, 59799,
    59800, 59801, 59802, 59803, 59804, 59805, 59806, 59807, 59808, 59809, 59957, 59969, 59981, 59993, 59959, 59971, 59983, 59995, 59960, 59972, 59984, 59996, 59961, 59973, 59985, 59997, 60009, 60016,
    60017, 60026, 60010, 60015, 60018, 60025, 60011, 60014, 60019, 60024, 60029, 60032, 60033, 60036, 60030, 60031, 60034, 60035, 60037, 60041, 60045, 60049, 60038, 60042, 60046, 60050, 60039, 60043,
    60047, 60051, 60040, 60044, 60048, 60052, 60784, 60785, 60786, 60787]

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False, args=["--window-position=-5,0"])
    context = browser.new_context(
        viewport={
            "width": 2550, "height": 1300}
    )
    page = context.new_page()

    page.goto('https://www.eaglerider.com/activeadmin/charge_modifiers')

    util.login(page)

    for id in charge_modifier_id:
        page.goto(f'https://www.eaglerider.com/activeadmin/charge_modifiers/{id}/edit')
        page.fill("input[name=\"charge_modifier[end_date]\"]", "2022-12-31")
        page.click("input[name=\"commit\"]")
        page.wait_for_timeout(1000)

    browser.close()
